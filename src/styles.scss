// Angular Material 20+ (M3) theming
@use '@angular/material' as mat;

/* ===================== MATERIAL THEME (M3) ===================== */

/* 1) Core — подключаем один раз */
@include mat.core();

/* 2) Базовая тема приложения (цвета/плотность) */
$app-theme: mat.define-theme((
  color: (
    theme-type: light,
    primary: mat.$azure-palette,
    tertiary: mat.$blue-palette,
  ),
  density: (scale: 0),
));

/* 3) Применяем системные CSS-переменные темы на <html> */
html { @include mat.theme($app-theme); }

/* 4) Подключаем темы всех компонентов один раз */
@include mat.all-component-themes($app-theme);


/* ===================== ЧЁТКИЙ КОМПАКТНЫЙ SLIDE-TOGGLE ===================== */
/* Локальная саб-тема с меньшей плотностью только для toggle */
$st-compact: mat.define-theme((
  color: (
    theme-type: light,
    primary: mat.$azure-palette,
    tertiary: mat.$blue-palette,
  ),
  density: (scale: -4), // -5 допустимо, но -4 даёт баланс размера/доступности
));

/* ВАЖНО: этот блок должен идти ПОСЛЕ all-component-themes */
.slide-toggle-compact {
  /* Локально переопределяем тему только для slide-toggle */
  @include mat.slide-toggle-theme($st-compact);

  /* Сжимаем контейнер и подпись (без transform — не будет размытия) */
  .mat-mdc-slide-toggle { margin: 0; padding: 0; line-height: 1; }
  .mdc-form-field { min-height: 0; align-items: center; margin: 0; }
  .mdc-form-field > label { line-height: 1.1; margin: 0; }

  /* Чёткие размеры свитча через MDC CSS vars — без масштабирования */
  .mdc-switch,
  .mat-mdc-slide-toggle {
    /* Подбирайте чётные значения -> резче отрисовка */
    --mdc-switch-track-width: 30px;   /* 28/30/32 — выбирайте по макету */
    --mdc-switch-track-height: 12px;  /* было 14, 12 — заметно ниже */
    --mdc-switch-handle-width: 16px;
    --mdc-switch-handle-height: 16px;
    --mdc-switch-state-layer-size: 26px; /* зона ripple/touch; 24–28 оптимально */
  }
}


/* ===================== GLOBAL BASE STYLES ===================== */

body {
  /* Можно переключить на `light dark`, чтобы следовать системе */
  color-scheme: light;

  /* Системные переменные Material */
  background-color: var(--mat-sys-surface);
  color: var(--mat-sys-on-surface);
  font: var(--mat-sys-body-medium);

  margin: 0;
}

/* База документа */
html, body { height: 100%; }
html, body { margin: 0; overflow: hidden; }
body { font-family: Roboto, "Helvetica Neue", Arial, sans-serif; }

app-root, sv-tabs-shell { display: block; height: 100%; }

/* ===================== LAYOUT ===================== */

.pre-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 0 20px;
  height: 100vh;
}

.page { height: 100%; display: flex; flex-direction: column; }
.page__header { flex: 0 0 auto; padding: 0 16px 10px; }
.page__outlet { flex: 1 1 auto; min-height: 0; overflow: hidden; }

h3 { margin: 0; line-height: 1.25; font-weight: 500; padding-bottom: 10px; }

.mat-mdc-card,
mat-card,
.mdc-card {
  background-color: #fff !important;
}


/* ===================== GLOBAL TABLE STYLES ===================== */

:root {
  /* Быстрая настройка таблиц через переменные */
  --table-cell-padding: 12px;
  --table-cell-font-size: 14px;
  --table-header-bg: var(--mat-sys-background);
  --table-header-fg: rgba(0, 0, 0, 0.6);
  --table-row-bg: #ffffff;
  --table-row-hover-bg: var(--mat-sys-background);
}

/* Базовая сетка для всех таблиц */
table,
.mat-mdc-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

/* Ячейки: паддинги/шрифты */
table :is(th, td),
.mat-mdc-table :is(.mat-mdc-header-cell, .mat-mdc-cell) {
  padding: var(--table-cell-padding);
  font-size: var(--table-cell-font-size);
}

/* Убираем отступы у <p> внутри ячеек */
table :is(th, td) p,
.mat-mdc-table :is(.mat-mdc-header-cell, .mat-mdc-cell) p {
  margin: 0;
  padding: 0;
}

/* Заголовки: фон/цвет + sticky */
table th {
  font-weight: 500;
  background-color: var(--table-header-bg);
  color: var(--table-header-fg);
  position: sticky;
  top: 0;
  z-index: 5;
  box-shadow: 0 1px 0 rgba(0,0,0,0.08);
}

/* Для mat-table продублируем */
.mat-mdc-header-cell {
  position: sticky;
  top: 0;
  z-index: 5;
  background-color: var(--table-header-bg);
  color: var(--table-header-fg);
  box-shadow: 0 1px 0 rgba(0,0,0,0.08);
  font-weight: 500;
}

/* Строки: фон и hover */
table tr { background-color: var(--table-row-bg); }
table tr:hover { background-color: var(--table-row-hover-bg); }

/* Материальные строки для единообразия */
.mat-mdc-row .mat-mdc-cell { background-color: var(--table-row-bg); }
.mat-mdc-row:hover .mat-mdc-cell { background-color: var(--table-row-hover-bg); }
